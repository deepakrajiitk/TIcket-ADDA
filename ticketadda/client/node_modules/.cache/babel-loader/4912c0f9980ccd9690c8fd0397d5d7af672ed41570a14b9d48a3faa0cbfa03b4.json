{"ast":null,"code":"\"use strict\";\n\n/*\n * Copyright 2020 IBM All Rights Reserved.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.newFullContractEvents = void 0;\nfunction newFullContractEvents(transactionEvent) {\n  const transactionActions = transactionEvent.transactionData.actions || [];\n  return transactionActions.map(transactionAction => {\n    // payload is defined as 'bytes' in the protobuf.\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any,@typescript-eslint/no-unsafe-assignment\n    const payload = transactionAction.payload;\n    // payload has been decoded by fabric-common event service before being stored as TransactionEvent\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access,@typescript-eslint/no-unsafe-assignment\n    const chaincodeEvent = payload.action.proposal_response_payload.extension.events;\n    return newFullContractEvent(transactionEvent, chaincodeEvent);\n  });\n}\nexports.newFullContractEvents = newFullContractEvents;\nfunction newFullContractEvent(transactionEvent, chaincodeEvent) {\n  const contractEvent = {\n    chaincodeId: chaincodeEvent.chaincode_id,\n    eventName: chaincodeEvent.event_name,\n    payload: chaincodeEvent.payload,\n    getTransactionEvent: () => transactionEvent\n  };\n  return Object.freeze(contractEvent);\n}","map":{"version":3,"names":["newFullContractEvents","transactionEvent","transactionActions","transactionData","actions","map","transactionAction","payload","chaincodeEvent","action","proposal_response_payload","extension","events","newFullContractEvent","exports","contractEvent","chaincodeId","chaincode_id","eventName","event_name","getTransactionEvent","Object","freeze"],"sources":["../../../src/impl/event/fullcontracteventfactory.ts"],"sourcesContent":[null],"mappings":";;AAAA;;;;;;;;;AAUA,SAAgBA,qBAAqBA,CAACC,gBAAkC;EACvE,MAAMC,kBAAkB,GAAiCD,gBAAgB,CAACE,eAAuC,CAACC,OAAO,IAAI,EAAE;EAC/H,OAAOF,kBAAkB,CAACG,GAAG,CAAEC,iBAAiB,IAAI;IACnD;IAEA;IACA,MAAMC,OAAO,GAAGD,iBAAiB,CAACC,OAAc;IAChD;IACA;IACA,MAAMC,cAAc,GAAGD,OAAO,CAACE,MAAM,CAACC,yBAAyB,CAACC,SAAS,CAACC,MAA2C;IACrH,OAAOC,oBAAoB,CAACZ,gBAAgB,EAAEO,cAAc,CAAC;EAC9D,CAAC,CAAC;AACH;AAZAM,OAAA,CAAAd,qBAAA,GAAAA,qBAAA;AAcA,SAASa,oBAAoBA,CAACZ,gBAAkC,EAAEO,cAAiD;EAClH,MAAMO,aAAa,GAAkB;IACpCC,WAAW,EAAER,cAAc,CAACS,YAAY;IACxCC,SAAS,EAAEV,cAAc,CAACW,UAAU;IACpCZ,OAAO,EAAEC,cAAc,CAACD,OAAiB;IACzCa,mBAAmB,EAAEA,CAAA,KAAMnB;GAC3B;EACD,OAAOoB,MAAM,CAACC,MAAM,CAACP,aAAa,CAAC;AACpC"},"metadata":{},"sourceType":"script","externalDependencies":[]}